/*!
 * RegexGen.js - JavaScript Regular Expression Generator v0.2.0
 * https://github.com/amobiz/regexgen.js
 *
 * Supports CommonJS(node.js), AMD(RequireJS) and browser global.
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 * Date: 2014-06-11
 *
 */
!function(a){"use strict";"undefined"!=typeof module&&module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):window.regexGen=a()}(function(){"use strict";function a(a,b){var c=a.toString(16);return c.length<b?o.substring(0,b-c.length)+c:c}function b(a){return"[object Array]"===Object.prototype.toString.call(a)}function c(a){var b,c,d;for(b=1;b<arguments.length;++b){d=arguments[b];for(c in d)d.hasOwnProperty(c)&&(a[c]=d[c])}return a}function d(a,b){this._init(a,b)}function e(a,b,c,d){this._init(e.normalize(a)),this._prefixes=b||"",this._suffixes=c||"",this._join=d||""}function f(a,b){e.call(this,b,"(",")"),this._label=a}function g(a){this._init(),this._label=h.normalize(a)}function h(a){this._label=a}function i(a){this._init(a)}function j(a){this._modifier=a}function k(a){var b,c,d,e;if(d=this.exec(a))for(e={},b=0,c=d.length;c>b;++b)e[this.captures[b]]=d[b];return e}function l(a){var b,c,d;if(!this.global)return c=this.extract(a),c?[c]:[];for(d=[],b=a.length,this.lastIndex=0;c=this.extract(a);)d.push(c);return d}function m(){var a,b,c,d,f,g,h,i;for(f=[],h=[],c={captures:["0"],warnings:[]},a=0,b=arguments.length;b>a;++a)if(d=arguments[a],d instanceof j){if(-1!==h.indexOf(d._modifier)){c.warnings.push("duplicated modifier: "+d._modifier);continue}h.push(d._modifier)}else f.push(d);return g=new e(f)._generate(c,0),i=new RegExp(g,h.join("")),i.warnings=c.warnings,i.captures=c.captures,i.extract=k,i.extractAll=l,i}var n={captureParentheses:/(\((?!\?[:=!]))/g,characterClassChars:/^(?:.|\\[bdDfnrsStvwW]|\\x[A-Fa-f0-9]{2}|\\u[A-Fa-f0-9]{4}|\\c[A-Z])$/,characterClassExpr:/^\[\^?(.*)]$/,ctrlChars:/^[A-Za-z]$/,hexAsciiCodes:/^[0-9A-Fa-f]{2}$/,hexUnicodes:/^[0-9A-Fa-f]{4}$/,metaChars:/([$()*+.?[\\^{|\/])/g,metaClassChars:/([-\]\\^])/g,unitTerms:/^(?:.|\\[bBdDfnrsStvwW]|\\x[A-Fa-f0-9]{2}|\\u[A-Fa-f0-9]{4}|\\c[A-Z]|\\[$()*+.?[\/\\^{|]|\[(?:\\\]|[^\]])*?\]|\\\d{1,2})$/},o="00000000";return d.quote=function(a){return a.replace(n.metaChars,"\\$1")},d.charClasses=function(a,c,e){var f,g,h,i,j,k;for(j=k="",h=[],f=0;f<a.length;++f){if(g=a[f],b(g)){if(2===g.length&&("number"==typeof g[0]&&0<=g[0]&&g[0]<=9||"string"==typeof g[0]&&n.characterClassChars.test(g[0]))&&("number"==typeof g[1]&&0<=g[1]&&g[1]<=9||"string"==typeof g[1]&&n.characterClassChars.test(g[1]))){h.push(g[0]+"-"+g[1]);continue}}else{if("string"==typeof g){-1!==g.indexOf("-")&&(j="-",g=g.replace(/-/g,"")),-1!==g.indexOf("^")&&(k="^",g=g.replace(/\^/g,"")),h.push(g.replace(n.metaClassChars,"\\$1"));continue}if(g instanceof d){if(g._quantifiers&&e.push("ignoring quantifier of embeded character class: "+g._quantifiers),(g._preLookaheads||g._lookaheads)&&e.push("ignoring lookaheads of embeded character class: "+g._preLookaheads+" : "+g._lookaheads),i=g._body.match(n.characterClassExpr),i&&i[1]){i=i[1],"^"===i[0]&&(e.push("ignoring negation directive of embeded character class"),i=i.substring(1)),h.push(i);continue}if(n.characterClassChars.test(g._body)){h.push(g._body);continue}}}e.push("invalid character: "+g)}return(i=h.join(""))?j+i+k:(i=j+k,1===i.length&&c?d.quote(i):i)},d.sanitize=function(a,b){return a instanceof d?a:"string"==typeof a?new d(d.quote(a),b):"number"==typeof a?new d(a.toString(),b):a instanceof RegExp?new i(a.source):(new d)._warn("invalid regular expression: ",a)},d.isUnitTerm=function(a){return n.unitTerms.test(a)},d.wrap=function(a){return d.isUnitTerm(a)?a:"(?:"+a+")"},c(d.prototype,{_init:function(a,b){this._body=a||"",this._quantifiers=b||"",this._greedy="",this._preLookaheads="",this._lookaheads="",this._overwrite=""},_generate:function(a,b){function c(b){return"string"==typeof b?b:new e(b)._generate(a,!1)}var d,f,g,h;if(h=this._quantifiers?2:this._preLookaheads||this._lookaheads?1:0,h=Math.max(h,b),g=this._generateBody(a,h),this._warnings&&this._warnings.length>0)for(d=0,f=this._warnings.length;f>d;++d)a.warnings.push(this._warnings[d]);return g=this._overwrite?this._overwrite._generate(a,b):c(this._preLookaheads)+g+(this._quantifiers?this._quantifiers+this._greedy:"")+c(this._lookaheads)},_generateBody:function(a,b){return 2===b?d.wrap(this._body):this._body},_warn:function(a,b){return a&&(this._warnings||(this._warnings=[]),this._warnings.push(a+(b?JSON.stringify(b):""))),this},contains:function(){var a=new e(arguments,"(?=",")");return"string"==typeof this._preLookaheads?this._preLookaheads=[a]:this._preLookaheads.push(a),this},notContains:function(){var a=new e(arguments,"(?!",")");return"string"==typeof this._preLookaheads?this._preLookaheads=[a]:this._preLookaheads.push(a),this},followedBy:function(){var a=new e(arguments,"(?=",")");return"string"==typeof this._lookaheads?this._lookaheads=[a]:this._lookaheads.push(a),this},notFollowedBy:function(){var a=new e(arguments,"(?!",")");return"string"==typeof this._lookaheads?this._lookaheads=[a]:this._lookaheads.push(a),this},any:function(){return this._quantifiers="*",this},many:function(){return this._quantifiers="+",this},maybe:function(){return this._quantifiers="?",this},repeat:function(a){return this._quantifiers="number"==typeof a?"{"+a+"}":"+",this},multiple:function(a,b){if(a="number"==typeof a?a.toString():"0",b="number"==typeof b?b.toString():"",""===b){if("0"===a)return this._quantifiers="*",this;if("1"===a)return this._quantifiers="+",this}else if("0"===a&&"1"===b)return this._quantifiers="?",this;return this._quantifiers="{"+a+","+b+"}",this},greedy:function(){return this._greedy="",this},lazy:function(){return this._greedy="?",this},reluctant:function(){return this._greedy="?",this},regex:function(a){return a instanceof RegExp?this._overwrite=new i(a.source):"string"==typeof a?this._overwrite=new i(a):this._warn("regex(): specified regex is not a RegExp instance or is not a string. given: ",a),this}}),e.normalize=function(a){var b,c,e,f;if(f=[],a&&a.length>0)for(b=0,c=a.length;c>b;++b)e=a[b],e=d.sanitize(e),f.push(e);return f},e.prototype=new d,c(e.prototype,{_generateBody:function(a,b){var c,e,f,g,h,i,j;for(g=this._body,j=1===g.length||"|"===this._join?0:1,i=[],c=0,e=g.length;e>c;++c)f=g[c],h=f._generate(a,j),i.push(h);return h=i.join(this._join),this._prefixes||this._suffixes?this._prefixes+h+this._suffixes:2===b||1===b&&!j?d.wrap(h):h}}),f.currentLabel=function(a){return h.normalize(a.captures.length)},f.register=function(a,b){a.captures.push(b)},f.lookup=function(a,b){var c;return c=a.captures.indexOf(b),-1!==c?"\\"+c:null},f.prototype=new e,c(f.prototype,{_generateBody:function(a,b){return f.register(a,""===this._label?f.currentLabel(a):this._label),e.prototype._generateBody.call(this,a,b)}}),g.prototype=new d,c(g.prototype,{_generateBody:function(a){var b=f.lookup(a,this._label);return b?b:(this._warn("sameAs(): back reference has no matching capture: ",this._label),"")}}),h.normalize=function(a){return"string"==typeof a?a:"number"==typeof a?a.toString():a instanceof h?a._label:"__invalid_label__("+a.toString()+")"},i.prototype=new d,c(i.prototype,{_registerCaptures:function(a){var b,c,d;if(d=this._body.match(n.captureParentheses),d&&d.length>0)for(b=0,c=d.length;c>b;++b)f.register(a,f.currentLabel(a))},_generateBody:function(a,b){return this._registerCaptures(a),d.prototype._generateBody.call(this,a,b)}}),c(m,{mixin:function(a){c(a,m)},ignoreCase:function(){return new j("i")},searchAll:function(){return new j("g")},searchMultiLine:function(){return new j("m")},startOfLine:function(){return new d("^")},endOfLine:function(){return new d("$")},wordBoundary:function(){return new d("\\b")},nonWordBoundary:function(){return new d("\\B")},text:function(a){return d.sanitize(a)},anyCharOf:function(){var a=[];return new d("["+d.charClasses(arguments,!0,a)+"]")._warn(a)},anyCharBut:function(){var a=[];return new d("[^"+d.charClasses(arguments,!1,a)+"]")._warn(a)},anyChar:function(){return new d(".")},ascii:function(){var b,c,e,f,g;if(f="",g=[],c=arguments.length,c>0){for(b=0;c>b;++b)e=arguments[b],"string"==typeof e&&n.hexAsciiCodes.test(e)?f+="\\x"+e:"number"==typeof e&&e>=0&&255>=e?f+="\\x"+a(e,2):g.push(e.toString());return new d(f)._warn(0===g.length?"":"ascii(): values are not valid 2 hex digitals ascii code(s): ",g)}return(new d)._warn("ascii(): no values given, should provides a 2 hex digitals ascii code or any number <= 0xFF.")},unicode:function(){var b,c,e,f,g;if(f="",g=[],c=arguments.length,c>0){for(b=0,c=arguments.length;c>b;++b)e=arguments[b],"string"==typeof e&&n.hexUnicodes.test(e)?f+="\\u"+e:"number"==typeof e&&e>=0&&65535>=e?f+="\\u"+a(e,4):g.push(e.toString());return new d(f)._warn(0===g.length?"":"unicode(): values are not valid 2 hex digitals unicode code(s): ",g)}return(new d)._warn("unicode(): no values given, should provides a 2 hex digitals ascii code or any number <= 0xFFFF.")},nullChar:function(){return new d("\\0")},controlChar:function(a){return"string"==typeof a&&n.ctrlChars.test(a)?new d("\\c"+a):(new d)._warn("controlChar(): specified character is not a valid control character: ",a)},backspace:function(){return new d("[\\b]")},formFeed:function(){return new d("\\f")},lineFeed:function(){return new d("\\n")},carriageReturn:function(){return new d("\\r")},space:function(){return new d("\\s")},nonSpace:function(){return new d("\\S")},tab:function(){return new d("\\t")},vertTab:function(){return new d("\\v")},digital:function(){return new d("\\d")},nonDigital:function(){return new d("\\D")},word:function(){return new d("\\w")},nonWord:function(){return new d("\\W")},anything:function(){return new d(".","*")},hexDigital:function(){return new d("[0-9A-Fa-f]")},lineBreak:function(){return this.either(this.group(this.carriageReturn(),this.lineFeed()),this.carriageReturn(),this.lineFeed())},words:function(){return new d("\\w","+")},any:function(a){return d.sanitize(a,"*")},many:function(a){return d.sanitize(a,"+")},maybe:function(a){return d.sanitize(a,"?")},either:function(){return new e(arguments,"","","|")._warn(arguments.length>=2?"":"eidther(): this function needs at least 2 sub-expressions. given only: ",arguments[0])},group:function(){return new e(arguments)},capture:function(){var a,b;return arguments.length>0&&arguments[0]instanceof h?(a=arguments[0]._label,b=Array.prototype.slice.call(arguments,1)):(a="",b=arguments),new f(a,b)},label:function(a){return new h(a)},sameAs:function(a){return new g(a)},regex:function(a){return a instanceof RegExp?new i(a.source):"string"==typeof a?new i(a):new d(a)._warn("regex(): specified regex is not a RegExp instance or is not a string: ",a)}}),m});